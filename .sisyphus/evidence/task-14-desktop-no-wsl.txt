Task 14: Desktop WSL Isolation Verification
=============================================
Date: 2026-02-17

1. GREP: wsl|WSL|nixos-wsl in desktop host path
   $ grep -ri 'wsl' hosts/desktop/
   RESULT: Only GUARDRAIL comments (anti-leak documentation)
   Lines found:
     hosts/desktop/default.nix:6:# - MUST NOT import modules/nixos/wsl, home/wsl, or nixos-wsl
     hosts/desktop/default.nix:7:# - MUST NOT set wsl.* options
   STATUS: PASS (comments are guardrails, not imports)

2. GREP: wsl in desktop system modules
   $ grep -ri 'wsl' modules/nixos/desktop/
   RESULT: NO MATCHES
   STATUS: PASS

3. GREP: wsl in desktop home modules
   $ grep -ri 'wsl' home/desktop/
   RESULT: NO MATCHES
   STATUS: PASS

4. GREP: wsl.* options outside wsl paths
   $ grep -rn 'wsl\.\(enable\|usbip\|defaultUser\|interop\)' *.nix hosts/ modules/ home/
   RESULT: Only in correct WSL paths:
     - modules/nixos/wsl/default.nix:25: wsl.usbip.enable = true;
     - hosts/wsl/default.nix:19: wsl.enable = true;
   STATUS: PASS

5. GREP: config.wsl anywhere
   $ grep -rn 'config\.wsl' *.nix hosts/ modules/ home/
   RESULT: NO MATCHES
   STATUS: PASS

6. DESKTOP EVAL: No WSL option namespace pollution
   $ nix eval --raw .#nixosConfigurations.desktop.config.system.build.toplevel.drvPath
   RESULT: Successfully resolved (no wsl.* option errors)
   STATUS: PASS

CONCLUSION: Desktop is completely free of WSL option namespace.
Guardrail comments added to hosts/desktop/default.nix to prevent future leakage.
