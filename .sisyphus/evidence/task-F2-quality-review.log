===== F2: Configuration Quality Review =====
Date: 2026-02-17T10:29:44Z

===== 1. nix flake check =====
warning: Git tree '/etc/nixos' is dirty
evaluating flake...
checking flake output 'nixosConfigurations'...
checking NixOS configuration 'nixosConfigurations.desktop'...
checking NixOS configuration 'nixosConfigurations.wsl'...
checking flake output 'homeConfigurations'...
EXIT CODE: 0

===== 2. Desktop toplevel build =====
warning: Git tree '/etc/nixos' is dirty
EXIT CODE: 0

===== 3. WSL toplevel build =====
warning: Git tree '/etc/nixos' is dirty
EXIT CODE: 0

===== 4. Darwin HM eval =====
warning: Git tree '/etc/nixos' is dirty
"/nix/store/6xnwkp16r45cyl2fsbj6bf1xd748qfbp-home-manager-generation.drv"
EXIT CODE: 0

===== 5. Stale import check =====
Checking for stale imports of ./home.nix in hosts...
/etc/nixos/hosts/desktop/default.nix:8:# - MUST NOT import home.nix (legacy monolith; use home/common + home/desktop)

Checking for removed/moved module paths still referenced...
PASS: No absolute WSL repo paths

===== 6. WSL leakage into desktop =====
Checking desktop host for WSL module imports...
6:# - MUST NOT import modules/nixos/wsl, home/wsl, or nixos-wsl

Checking common modules for /mnt/c...
/etc/nixos/home/common/session.nix:2:# WSL-specific PATH (/mnt/c/...) belongs in home/wsl
/etc/nixos/home/common/default.nix:3:# CRITICAL: No /mnt/c paths, no WSL notifier, no platform-specific packages

===== 7. Dead module check =====
Checking for empty/placeholder modules...
  /etc/nixos/home/linux/default.nix: 12 lines
  /etc/nixos/home/darwin/default.nix: 27 lines

===== 8. hardware-configuration.nix isolation =====
/etc/nixos/modules/nixos/desktop/filesystems.nix:4:  # Desktop filesystems stay in hardware-configuration.nix.

Overall: Review complete.
